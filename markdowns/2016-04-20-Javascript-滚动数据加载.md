---
title:  数据加载
date: 2016-04-20
tags: JavaScript
---

数据加载，前后端连接点就在于如何优雅的渲染数据，实现数据与行为的分离。先说下自己面对的具体业务需求。

+ 滑动加载
+ ajax无刷新
+ 防止scroll强刷

<!-- more -->

### 应用zepto封装了ajax方法

对于简单的页面没有多大的效果，但是对于整个项目的这么封装是比较方便的。减少可以避免的重复数据。

### 数据加载与防止强刷

用的是一般的解决方案，只是用seTimeout()阻塞了加载罢了。后期可以进一步的优化加载方法。

通过document监听scroll，每当距离底部不足20px开始加载，每一次加载5条数据。

加载数据的通过flog控制加载的过程，没有渲染成功不去请求下一次接口。

可以控制想要加载的页数，也说超过了就不在进行加载了。

### 数据放在sessionStorage

这样处理可以优化数据渲染，没有必要每次进入页面都要请求数据，这样处理，可以减少请求数。

我们通过$("body").scrollTop()记录我们浏览的距离，记录我们刚才访问的页面的位置，优化用户体验。

[数据加载demo](https://github.com/dukegod/h5-demos/tree/master/demos/loadingDates)

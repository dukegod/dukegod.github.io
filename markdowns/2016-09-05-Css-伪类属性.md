---
title:  css伪类属性
date: 2016-09-05
tags: CSS
---

伪劣属性，在前端开发如今用到的越来越多，平时获取修改伪类属性，会遇到一些坑。

jquery并不能获取伪类属性的样式，因为jquery只能获取DOM元素，伪类不属于DOM属性，jquery只能和我们说拜拜啦。

<!-- more -->

## 获取伪类属性

window.getComputedStyle(ele,pseudo).getPropertyValue(attr);

```
// 原生获取样式,只读的方式找到样式
var hth = document.getElementsById('styleId');
var rawStyle = getStyle(hth,'width');
console.log('rawStyle----',rawStyle);

// 获取伪类的样式
var fakeStyle = window.getComputedStyle(hth, ':after').getPropertyValue('width');
console.log('获取伪类元素的内容---',fakeStyle);
var fakestyle2 = getStyle(hth,':after','width');
console.log('fakestyle2---',fakestyle2);
```

## 修改伪类属性

如果想要用JavaScript动态更改伪元素属性值的话，思路如下：

- JavaScript更改data-属性值来更改伪元素的content值
- 创建多个class，通过切换class来达到改变样式的目的
- 利用CSSStyleSheet的insertRule方法来添加样式
- 利用内部css样式的高优先级来覆盖外部css

#### JavaScript更改data-属性值来更改伪元素的content值

利用DOM的data-属性来更改content的值，这样JavaScript可以获取到此DOM的值了，就可以动态的修改样式了。

```
<p id="pp" style="width:200px;"></p>
#pp::after{
  width: 100px;
  font-size: 28px;
  color: #7f9fd4;
  content: attr(data-cont);
}

var pp = document.getElementById('pp');
console.log(getStyle(pp, ':after', 'content'));

// 动态修改content值
$('#pp').attr('data-cont','aaa');
console.log(getStyle(pp, ':after', 'content'));
```

#### 创建多个class，通过切换class来达到改变样式的目的

#### 利用CSSStyleSheet的insertRule方法来添加样式

#### 利用内部css样式的高优先级来覆盖外部css

项目地址

[getStyle](https://github.com/dukegod/h5-demos/tree/master/demos/getStyle)

参考

[利用javascript获取并修改伪元素的值](http://chitanda.me/2015/07/15/get-and-modify-pseudo-elements-value-by-javascript/)
